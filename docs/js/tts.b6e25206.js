(self["webpackChunktts"]=self["webpackChunktts"]||[]).push([[101],{5787:function(e,t,s){var n=s(7976),o=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw o("Incorrect invocation")}},3013:function(e){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(e,t,s){"use strict";var n,o,i,r=s(3013),a=s(9781),c=s(7854),l=s(614),u=s(111),h=s(2597),m=s(648),p=s(6330),f=s(8880),d=s(8052),g=s(3070).f,_=s(7976),y=s(9518),b=s(7674),v=s(5112),w=s(9711),E=s(9909),C=E.enforce,R=E.get,T=c.Int8Array,k=T&&T.prototype,O=c.Uint8ClampedArray,A=O&&O.prototype,x=T&&y(T),S=k&&y(k),N=Object.prototype,I=c.TypeError,L=v("toStringTag"),$=w("TYPED_ARRAY_TAG"),D="TypedArrayConstructor",P=r&&!!b&&"Opera"!==m(c.opera),U=!1,j={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},M={BigInt64Array:8,BigUint64Array:8},B=function(e){if(!u(e))return!1;var t=m(e);return"DataView"===t||h(j,t)||h(M,t)},q=function(e){var t=y(e);if(u(t)){var s=R(t);return s&&h(s,D)?s[D]:q(t)}},F=function(e){if(!u(e))return!1;var t=m(e);return h(j,t)||h(M,t)},J=function(e){if(F(e))return e;throw I("Target is not a typed array")},V=function(e){if(l(e)&&(!b||_(x,e)))return e;throw I(p(e)+" is not a typed array constructor")},H=function(e,t,s,n){if(a){if(s)for(var o in j){var i=c[o];if(i&&h(i.prototype,e))try{delete i.prototype[e]}catch(r){try{i.prototype[e]=t}catch(l){}}}S[e]&&!s||d(S,e,s?t:P&&k[e]||t,n)}},W=function(e,t,s){var n,o;if(a){if(b){if(s)for(n in j)if(o=c[n],o&&h(o,e))try{delete o[e]}catch(i){}if(x[e]&&!s)return;try{return d(x,e,s?t:P&&x[e]||t)}catch(i){}}for(n in j)o=c[n],!o||o[e]&&!s||d(o,e,t)}};for(n in j)o=c[n],i=o&&o.prototype,i?C(i)[D]=o:P=!1;for(n in M)o=c[n],i=o&&o.prototype,i&&(C(i)[D]=o);if((!P||!l(x)||x===Function.prototype)&&(x=function(){throw I("Incorrect invocation")},P))for(n in j)c[n]&&b(c[n],x);if((!P||!S||S===N)&&(S=x.prototype,P))for(n in j)c[n]&&b(c[n].prototype,S);if(P&&y(A)!==S&&b(A,S),a&&!h(S,L))for(n in U=!0,g(S,L,{get:function(){return u(this)?this[$]:void 0}}),j)c[n]&&f(c[n],$,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:P,TYPED_ARRAY_TAG:U&&$,aTypedArray:J,aTypedArrayConstructor:V,exportTypedArrayMethod:H,exportTypedArrayStaticMethod:W,getTypedArrayConstructor:q,isView:B,isTypedArray:F,TypedArray:x,TypedArrayPrototype:S}},9671:function(e,t,s){var n=s(9974),o=s(8361),i=s(7908),r=s(6244),a=function(e){var t=1==e;return function(s,a,c){var l,u,h=i(s),m=o(h),p=n(a,c),f=r(m);while(f-- >0)if(l=m[f],u=p(l,f,h),u)switch(e){case 0:return l;case 1:return f}return t?-1:void 0}};e.exports={findLast:a(0),findLastIndex:a(1)}},8544:function(e,t,s){var n=s(7293);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},3678:function(e){e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},9974:function(e,t,s){var n=s(1702),o=s(9662),i=s(4374),r=n(n.bind);e.exports=function(e,t){return o(e),void 0===t?e:i?r(e,t):function(){return e.apply(t,arguments)}}},9518:function(e,t,s){var n=s(2597),o=s(614),i=s(7908),r=s(6200),a=s(8544),c=r("IE_PROTO"),l=Object,u=l.prototype;e.exports=a?l.getPrototypeOf:function(e){var t=i(e);if(n(t,c))return t[c];var s=t.constructor;return o(s)&&t instanceof s?s.prototype:t instanceof l?u:null}},8675:function(e,t,s){"use strict";var n=s(260),o=s(6244),i=s(9303),r=n.aTypedArray,a=n.exportTypedArrayMethod;a("at",(function(e){var t=r(this),s=o(t),n=i(e),a=n>=0?n:s+n;return a<0||a>=s?void 0:t[a]}))},4590:function(e,t,s){"use strict";var n=s(260),o=s(9671).findLastIndex,i=n.aTypedArray,r=n.exportTypedArrayMethod;r("findLastIndex",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},3408:function(e,t,s){"use strict";var n=s(260),o=s(9671).findLast,i=n.aTypedArray,r=n.exportTypedArrayMethod;r("findLast",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},2801:function(e,t,s){"use strict";var n=s(2109),o=s(7854),i=s(5005),r=s(9114),a=s(3070).f,c=s(2597),l=s(5787),u=s(9587),h=s(6277),m=s(3678),p=s(1060),f=s(9781),d=s(1913),g="DOMException",_=i("Error"),y=i(g),b=function(){l(this,v);var e=arguments.length,t=h(e<1?void 0:arguments[0]),s=h(e<2?void 0:arguments[1],"Error"),n=new y(t,s),o=_(t);return o.name=g,a(n,"stack",r(1,p(o.stack,1))),u(n,this,b),n},v=b.prototype=y.prototype,w="stack"in _(g),E="stack"in new y(1,2),C=y&&f&&Object.getOwnPropertyDescriptor(o,g),R=!!C&&!(C.writable&&C.configurable),T=w&&!R&&!E;n({global:!0,constructor:!0,forced:d||T},{DOMException:T?b:y});var k=i(g),O=k.prototype;if(O.constructor!==k)for(var A in d||a(O,"constructor",r(1,k)),m)if(c(m,A)){var x=m[A],S=x.s;c(k,S)||a(k,S,r(6,x.c))}},6265:function(e,t,s){e.exports=s(9435)},4951:function(e,t,s){"use strict";s(2801);var n=s(6642),o=s(6806),i=s(3833),r=s(4360),a=s(5047),c=s(5976),l=s(9896),u=s(8507),h=s(3303),m=s(6090),p=s(1874);e.exports=function(e){return new Promise((function(t,s){var f,d=e.data,g=e.headers,_=e.responseType;function y(){e.cancelToken&&e.cancelToken.unsubscribe(f),e.signal&&e.signal.removeEventListener("abort",f)}n.isFormData(d)&&n.isStandardBrowserEnv()&&delete g["Content-Type"];var b=new XMLHttpRequest;if(e.auth){var v=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";g.Authorization="Basic "+btoa(v+":"+w)}var E=a(e.baseURL,e.url);function C(){if(b){var n="getAllResponseHeaders"in b?c(b.getAllResponseHeaders()):null,i=_&&"text"!==_&&"json"!==_?b.response:b.responseText,r={data:i,status:b.status,statusText:b.statusText,headers:n,config:e,request:b};o((function(e){t(e),y()}),(function(e){s(e),y()}),r),b=null}}if(b.open(e.method.toUpperCase(),r(E,e.params,e.paramsSerializer),!0),b.timeout=e.timeout,"onloadend"in b?b.onloadend=C:b.onreadystatechange=function(){b&&4===b.readyState&&(0!==b.status||b.responseURL&&0===b.responseURL.indexOf("file:"))&&setTimeout(C)},b.onabort=function(){b&&(s(new h("Request aborted",h.ECONNABORTED,e,b)),b=null)},b.onerror=function(){s(new h("Network Error",h.ERR_NETWORK,e,b,b)),b=null},b.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",n=e.transitional||u;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),s(new h(t,n.clarifyTimeoutError?h.ETIMEDOUT:h.ECONNABORTED,e,b)),b=null},n.isStandardBrowserEnv()){var R=(e.withCredentials||l(E))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;R&&(g[e.xsrfHeaderName]=R)}"setRequestHeader"in b&&n.forEach(g,(function(e,t){"undefined"===typeof d&&"content-type"===t.toLowerCase()?delete g[t]:b.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(b.withCredentials=!!e.withCredentials),_&&"json"!==_&&(b.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&b.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&b.upload&&b.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(f=function(e){b&&(s(!e||e&&e.type?new m:e),b.abort(),b=null)},e.cancelToken&&e.cancelToken.subscribe(f),e.signal&&(e.signal.aborted?f():e.signal.addEventListener("abort",f))),d||(d=null);var T=p(E);T&&-1===["http","https","file"].indexOf(T)?s(new h("Unsupported protocol "+T+":",h.ERR_BAD_REQUEST,e)):b.send(d)}))}},9435:function(e,t,s){"use strict";var n=s(6642),o=s(5955),i=s(7104),r=s(8186),a=s(7);function c(e){var t=new i(e),s=o(i.prototype.request,t);return n.extend(s,i.prototype,t),n.extend(s,t),s.create=function(t){return c(r(e,t))},s}var l=c(a);l.Axios=i,l.CanceledError=s(6090),l.CancelToken=s(6016),l.isCancel=s(5936),l.VERSION=s(4679).version,l.toFormData=s(8994),l.AxiosError=s(3303),l.Cancel=l.CanceledError,l.all=function(e){return Promise.all(e)},l.spread=s(5431),l.isAxiosError=s(786),e.exports=l,e.exports["default"]=l},6016:function(e,t,s){"use strict";s(1703),s(7658);var n=s(6090);function o(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var s=this;this.promise.then((function(e){if(s._listeners){var t,n=s._listeners.length;for(t=0;t<n;t++)s._listeners[t](e);s._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){s.subscribe(e),t=e})).then(e);return n.cancel=function(){s.unsubscribe(t)},n},e((function(e){s.reason||(s.reason=new n(e),t(s.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},o.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},o.source=function(){var e,t=new o((function(t){e=t}));return{token:t,cancel:e}},e.exports=o},6090:function(e,t,s){"use strict";var n=s(3303),o=s(6642);function i(e){n.call(this,null==e?"canceled":e,n.ERR_CANCELED),this.name="CanceledError"}o.inherits(i,n,{__CANCEL__:!0}),e.exports=i},5936:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},7104:function(e,t,s){"use strict";s(541),s(7658);var n=s(6642),o=s(4360),i=s(999),r=s(6559),a=s(8186),c=s(5047),l=s(6298),u=l.validators;function h(e){this.defaults=e,this.interceptors={request:new i,response:new i}}h.prototype.request=function(e,t){"string"===typeof e?(t=t||{},t.url=e):t=e||{},t=a(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var s=t.transitional;void 0!==s&&l.assertOptions(s,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var n=[],o=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,n.unshift(e.fulfilled,e.rejected))}));var i,c=[];if(this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)})),!o){var h=[r,void 0];Array.prototype.unshift.apply(h,n),h=h.concat(c),i=Promise.resolve(t);while(h.length)i=i.then(h.shift(),h.shift());return i}var m=t;while(n.length){var p=n.shift(),f=n.shift();try{m=p(m)}catch(d){f(d);break}}try{i=r(m)}catch(d){return Promise.reject(d)}while(c.length)i=i.then(c.shift(),c.shift());return i},h.prototype.getUri=function(e){e=a(this.defaults,e);var t=c(e.baseURL,e.url);return o(t,e.params,e.paramsSerializer)},n.forEach(["delete","get","head","options"],(function(e){h.prototype[e]=function(t,s){return this.request(a(s||{},{method:e,url:t,data:(s||{}).data}))}})),n.forEach(["post","put","patch"],(function(e){function t(t){return function(s,n,o){return this.request(a(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:s,data:n}))}}h.prototype[e]=t(),h.prototype[e+"Form"]=t(!0)})),e.exports=h},3303:function(e,t,s){"use strict";s(1703);var n=s(6642);function o(e,t,s,n,o){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),n&&(this.request=n),o&&(this.response=o)}n.inherits(o,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var i=o.prototype,r={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){r[e]={value:e}})),Object.defineProperties(o,r),Object.defineProperty(i,"isAxiosError",{value:!0}),o.from=function(e,t,s,r,a,c){var l=Object.create(i);return n.toFlatObject(e,l,(function(e){return e!==Error.prototype})),o.call(l,e.message,t,s,r,a),l.name=e.name,c&&Object.assign(l,c),l},e.exports=o},999:function(e,t,s){"use strict";s(7658);var n=s(6642);function o(){this.handlers=[]}o.prototype.use=function(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!s&&s.synchronous,runWhen:s?s.runWhen:null}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},5047:function(e,t,s){"use strict";var n=s(4777),o=s(2381);e.exports=function(e,t){return e&&!n(t)?o(e,t):t}},6559:function(e,t,s){"use strict";var n=s(6642),o=s(3756),i=s(5936),r=s(7),a=s(6090);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a}e.exports=function(e){c(e),e.headers=e.headers||{},e.data=o.call(e,e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]}));var t=e.adapter||r.adapter;return t(e).then((function(t){return c(e),t.data=o.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(c(e),t&&t.response&&(t.response.data=o.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},8186:function(e,t,s){"use strict";var n=s(6642);e.exports=function(e,t){t=t||{};var s={};function o(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function i(s){return n.isUndefined(t[s])?n.isUndefined(e[s])?void 0:o(void 0,e[s]):o(e[s],t[s])}function r(e){if(!n.isUndefined(t[e]))return o(void 0,t[e])}function a(s){return n.isUndefined(t[s])?n.isUndefined(e[s])?void 0:o(void 0,e[s]):o(void 0,t[s])}function c(s){return s in t?o(e[s],t[s]):s in e?o(void 0,e[s]):void 0}var l={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return n.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=l[e]||i,o=t(e);n.isUndefined(o)&&t!==c||(s[e]=o)})),s}},6806:function(e,t,s){"use strict";var n=s(3303);e.exports=function(e,t,s){var o=s.config.validateStatus;s.status&&o&&!o(s.status)?t(new n("Request failed with status code "+s.status,[n.ERR_BAD_REQUEST,n.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s)):e(s)}},3756:function(e,t,s){"use strict";var n=s(6642),o=s(7);e.exports=function(e,t,s){var i=this||o;return n.forEach(s,(function(s){e=s.call(i,e,t)})),e}},7:function(e,t,s){"use strict";var n=s(6642),o=s(1446),i=s(3303),r=s(8507),a=s(8994),c={"Content-Type":"application/x-www-form-urlencoded"};function l(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function u(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=s(4951)),e}function h(e,t,s){if(n.isString(e))try{return(t||JSON.parse)(e),n.trim(e)}catch(o){if("SyntaxError"!==o.name)throw o}return(s||JSON.stringify)(e)}var m={transitional:r,adapter:u(),transformRequest:[function(e,t){if(o(t,"Accept"),o(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e))return e;if(n.isArrayBufferView(e))return e.buffer;if(n.isURLSearchParams(e))return l(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var s,i=n.isObject(e),r=t&&t["Content-Type"];if((s=n.isFileList(e))||i&&"multipart/form-data"===r){var c=this.env&&this.env.FormData;return a(s?{"files[]":e}:e,c&&new c)}return i||"application/json"===r?(l(t,"application/json"),h(e)):e}],transformResponse:[function(e){var t=this.transitional||m.transitional,s=t&&t.silentJSONParsing,o=t&&t.forcedJSONParsing,r=!s&&"json"===this.responseType;if(r||o&&n.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(r){if("SyntaxError"===a.name)throw i.from(a,i.ERR_BAD_RESPONSE,this,null,this.response);throw a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:s(1051)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function(e){m.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){m.headers[e]=n.merge(c)})),e.exports=m},8507:function(e){"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},4679:function(e){e.exports={version:"0.27.2"}},5955:function(e){"use strict";e.exports=function(e,t){return function(){for(var s=new Array(arguments.length),n=0;n<s.length;n++)s[n]=arguments[n];return e.apply(t,s)}}},4360:function(e,t,s){"use strict";s(7658);var n=s(6642);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,s){if(!t)return e;var i;if(s)i=s(t);else if(n.isURLSearchParams(t))i=t.toString();else{var r=[];n.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),r.push(o(t)+"="+o(e))})))})),i=r.join("&")}if(i){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},2381:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},3833:function(e,t,s){"use strict";s(7658);var n=s(6642);e.exports=n.isStandardBrowserEnv()?function(){return{write:function(e,t,s,o,i,r){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(s)&&a.push("expires="+new Date(s).toGMTString()),n.isString(o)&&a.push("path="+o),n.isString(i)&&a.push("domain="+i),!0===r&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},4777:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},786:function(e,t,s){"use strict";var n=s(6642);e.exports=function(e){return n.isObject(e)&&!0===e.isAxiosError}},9896:function(e,t,s){"use strict";var n=s(6642);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a");function o(e){var n=e;return t&&(s.setAttribute("href",n),n=s.href),s.setAttribute("href",n),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:"/"===s.pathname.charAt(0)?s.pathname:"/"+s.pathname}}return e=o(window.location.href),function(t){var s=n.isString(t)?o(t):t;return s.protocol===e.protocol&&s.host===e.host}}():function(){return function(){return!0}}()},1446:function(e,t,s){"use strict";var n=s(6642);e.exports=function(e,t){n.forEach(e,(function(s,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=s,delete e[n])}))}},1051:function(e){e.exports=null},5976:function(e,t,s){"use strict";var n=s(6642),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,s,i,r={};return e?(n.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=n.trim(e.substr(0,i)).toLowerCase(),s=n.trim(e.substr(i+1)),t){if(r[t]&&o.indexOf(t)>=0)return;r[t]="set-cookie"===t?(r[t]?r[t]:[]).concat([s]):r[t]?r[t]+", "+s:s}})),r):r}},1874:function(e){"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},5431:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},8994:function(e,t,s){"use strict";s(1703),s(7658);var n=s(6642);function o(e,t){t=t||new FormData;var s=[];function o(e){return null===e?"":n.isDate(e)?e.toISOString():n.isArrayBuffer(e)||n.isTypedArray(e)?"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function i(e,r){if(n.isPlainObject(e)||n.isArray(e)){if(-1!==s.indexOf(e))throw Error("Circular reference detected in "+r);s.push(e),n.forEach(e,(function(e,s){if(!n.isUndefined(e)){var a,c=r?r+"."+s:s;if(e&&!r&&"object"===typeof e)if(n.endsWith(s,"{}"))e=JSON.stringify(e);else if(n.endsWith(s,"[]")&&(a=n.toArray(e)))return void a.forEach((function(e){!n.isUndefined(e)&&t.append(c,o(e))}));i(e,c)}})),s.pop()}else t.append(r,o(e))}return i(e),t}e.exports=o},6298:function(e,t,s){"use strict";var n=s(4679).version,o=s(3303),i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}}));var r={};function a(e,t,s){if("object"!==typeof e)throw new o("options must be an object",o.ERR_BAD_OPTION_VALUE);var n=Object.keys(e),i=n.length;while(i-- >0){var r=n[i],a=t[r];if(a){var c=e[r],l=void 0===c||a(c,r,e);if(!0!==l)throw new o("option "+r+" must be "+l,o.ERR_BAD_OPTION_VALUE)}else if(!0!==s)throw new o("Unknown option "+r,o.ERR_BAD_OPTION)}}i.transitional=function(e,t,s){function i(e,t){return"[Axios v"+n+"] Transitional option '"+e+"'"+t+(s?". "+s:"")}return function(s,n,a){if(!1===e)throw new o(i(n," has been removed"+(t?" in "+t:"")),o.ERR_DEPRECATED);return t&&!r[n]&&(r[n]=!0,console.warn(i(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(s,n,a)}},e.exports={assertOptions:a,validators:i}},6642:function(e,t,s){"use strict";s(8675),s(3408),s(4590);var n=s(5955),o=Object.prototype.toString,i=function(e){return function(t){var s=o.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())}}(Object.create(null));function r(e){return e=e.toLowerCase(),function(t){return i(t)===e}}function a(e){return Array.isArray(e)}function c(e){return"undefined"===typeof e}function l(e){return null!==e&&!c(e)&&null!==e.constructor&&!c(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var u=r("ArrayBuffer");function h(e){var t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&u(e.buffer),t}function m(e){return"string"===typeof e}function p(e){return"number"===typeof e}function f(e){return null!==e&&"object"===typeof e}function d(e){if("object"!==i(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var g=r("Date"),_=r("File"),y=r("Blob"),b=r("FileList");function v(e){return"[object Function]"===o.call(e)}function w(e){return f(e)&&v(e.pipe)}function E(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||o.call(e)===t||v(e.toString)&&e.toString()===t)}var C=r("URLSearchParams");function R(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function T(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function k(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),a(e))for(var s=0,n=e.length;s<n;s++)t.call(null,e[s],s,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function O(){var e={};function t(t,s){d(e[s])&&d(t)?e[s]=O(e[s],t):d(t)?e[s]=O({},t):a(t)?e[s]=t.slice():e[s]=t}for(var s=0,n=arguments.length;s<n;s++)k(arguments[s],t);return e}function A(e,t,s){return k(t,(function(t,o){e[o]=s&&"function"===typeof t?n(t,s):t})),e}function x(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}function S(e,t,s,n){e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,s&&Object.assign(e.prototype,s)}function N(e,t,s){var n,o,i,r={};t=t||{};do{n=Object.getOwnPropertyNames(e),o=n.length;while(o-- >0)i=n[o],r[i]||(t[i]=e[i],r[i]=!0);e=Object.getPrototypeOf(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t}function I(e,t,s){e=String(e),(void 0===s||s>e.length)&&(s=e.length),s-=t.length;var n=e.indexOf(t,s);return-1!==n&&n===s}function L(e){if(!e)return null;var t=e.length;if(c(t))return null;var s=new Array(t);while(t-- >0)s[t]=e[t];return s}var $=function(e){return function(t){return e&&t instanceof e}}("undefined"!==typeof Uint8Array&&Object.getPrototypeOf(Uint8Array));e.exports={isArray:a,isArrayBuffer:u,isBuffer:l,isFormData:E,isArrayBufferView:h,isString:m,isNumber:p,isObject:f,isPlainObject:d,isUndefined:c,isDate:g,isFile:_,isBlob:y,isFunction:v,isStream:w,isURLSearchParams:C,isStandardBrowserEnv:T,forEach:k,merge:O,extend:A,trim:R,stripBOM:x,inherits:S,toFlatObject:N,kindOf:i,kindOfTest:r,endsWith:I,toArray:L,isTypedArray:$,isFileList:b}},8912:function(e,t,s){const n=s(6875);e.exports={client:n,Client:n}},9663:function(e,t,s){const n=s(2604),o=s(5579);e.exports=function(e,t){let s=void 0!==e.url?e.url:e.uri;if(o.isURL(s)||(s=`https://api.twitch.tv/kraken${"/"===s[0]?s:`/${s}`}`),o.isNode()){const o=Object.assign({method:"GET",json:!0},e);if(o.qs){const e=new URLSearchParams(o.qs);s+=`?${e}`}const i={};"fetchAgent"in this.opts.connection&&(i.agent=this.opts.connection.fetchAgent);const r=n(s,{...i,method:o.method,headers:o.headers,body:o.body});let a={};r.then((e=>(a={statusCode:e.status,headers:e.headers},o.json?e.json():e.text()))).then((e=>t(null,a,e)),(e=>t(e,a,null)))}else{const n=Object.assign({method:"GET",headers:{}},e,{url:s}),o=new XMLHttpRequest;o.open(n.method,n.url,!0);for(const e in n.headers)o.setRequestHeader(e,n.headers[e]);o.responseType="json",o.addEventListener("load",(e=>{4===o.readyState&&(200!==o.status?t(o.status,null,null):t(null,null,o.response))})),o.send()}}},6875:function(e,t,s){s(7658);const n="undefined"!==typeof s.g?s.g:"undefined"!==typeof window?window:{},o=n.WebSocket||s(8726),i=n.fetch||s(2604),r=s(9663),a=s(5950),c=s(7136).EventEmitter,l=s(9651),u=s(3011),h=s(2209),m=s(5579);let p=!1;const f=function e(t){if(this instanceof e===!1)return new e(t);this.opts=m.get(t,{}),this.opts.channels=this.opts.channels||[],this.opts.connection=this.opts.connection||{},this.opts.identity=this.opts.identity||{},this.opts.options=this.opts.options||{},this.clientId=m.get(this.opts.options.clientId,null),this._globalDefaultChannel=m.channel(m.get(this.opts.options.globalDefaultChannel,"#tmijs")),this._skipMembership=m.get(this.opts.options.skipMembership,!1),this._skipUpdatingEmotesets=m.get(this.opts.options.skipUpdatingEmotesets,!1),this._updateEmotesetsTimer=null,this._updateEmotesetsTimerDelay=m.get(this.opts.options.updateEmotesetsTimer,6e4),this.maxReconnectAttempts=m.get(this.opts.connection.maxReconnectAttempts,1/0),this.maxReconnectInterval=m.get(this.opts.connection.maxReconnectInterval,3e4),this.reconnect=m.get(this.opts.connection.reconnect,!0),this.reconnectDecay=m.get(this.opts.connection.reconnectDecay,1.5),this.reconnectInterval=m.get(this.opts.connection.reconnectInterval,1e3),this.reconnecting=!1,this.reconnections=0,this.reconnectTimer=this.reconnectInterval,this.secure=m.get(this.opts.connection.secure,!this.opts.connection.server&&!this.opts.connection.port),this.emotes="",this.emotesets={},this.channels=[],this.currentLatency=0,this.globaluserstate={},this.lastJoined="",this.latency=new Date,this.moderators={},this.pingLoop=null,this.pingTimeout=null,this.reason="",this.username="",this.userstate={},this.wasCloseCalled=!1,this.ws=null;let s="error";this.opts.options.debug&&(s="info"),this.log=this.opts.logger||l;try{l.setLevel(s)}catch(n){}this.opts.channels.forEach(((e,t,s)=>s[t]=m.channel(e))),c.call(this),this.setMaxListeners(0)};m.inherits(f,c);for(const d in a)f.prototype[d]=a[d];f.prototype.emits=function(e,t){for(let s=0;s<e.length;s++){const n=s<t.length?t[s]:t[t.length-1];this.emit.apply(this,[e[s]].concat(n))}},f.prototype.api=function(...e){p||(this.log.warn("Client.prototype.api is deprecated and will be removed for version 2.0.0"),p=!0),r(...e)},f.prototype.handleMessage=function(e){if(!e)return;this.listenerCount("raw_message")&&this.emit("raw_message",JSON.parse(JSON.stringify(e)),e);const t=m.channel(m.get(e.params[0],null));let s=m.get(e.params[1],null);const n=m.get(e.tags["msg-id"],null),o=e.tags=u.badges(u.badgeInfo(u.emotes(e.tags)));for(const i in o){if("emote-sets"===i||"ban-duration"===i||"bits"===i)continue;let e=o[i];"boolean"===typeof e?e=null:"1"===e?e=!0:"0"===e?e=!1:"string"===typeof e&&(e=m.unescapeIRC(e)),o[i]=e}if(null===e.prefix)switch(e.command){case"PING":this.emit("ping"),this._isConnected()&&this.ws.send("PONG");break;case"PONG":{const e=new Date;this.currentLatency=(e.getTime()-this.latency.getTime())/1e3,this.emits(["pong","_promisePing"],[[this.currentLatency]]),clearTimeout(this.pingTimeout);break}default:this.log.warn(`Could not parse message with no prefix:\n${JSON.stringify(e,null,4)}`);break}else if("tmi.twitch.tv"===e.prefix)switch(e.command){case"002":case"003":case"004":case"372":case"375":case"CAP":break;case"001":this.username=e.params[0];break;case"376":{this.log.info("Connected to server."),this.userstate[this._globalDefaultChannel]={},this.emits(["connected","_promiseConnect"],[[this.server,this.port],[null]]),this.reconnections=0,this.reconnectTimer=this.reconnectInterval,this.pingLoop=setInterval((()=>{this._isConnected()&&this.ws.send("PING"),this.latency=new Date,this.pingTimeout=setTimeout((()=>{null!==this.ws&&(this.wasCloseCalled=!1,this.log.error("Ping timeout."),this.ws.close(),clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer))}),m.get(this.opts.connection.timeout,9999))}),6e4);let e=m.get(this.opts.options.joinInterval,2e3);e<300&&(e=300);const t=new h(e),s=[...new Set([...this.opts.channels,...this.channels])];this.channels=[];for(let n=0;n<s.length;n++){const e=s[n];t.add((()=>{this._isConnected()&&this.join(e).catch((e=>this.log.error(e)))}))}t.next();break}case"NOTICE":{const o=[null],i=[t,n,s],r=[n],a=[t,!0],c=[t,!1],l=[i,o],u=[i,r],h=`[${t}] ${s}`;switch(n){case"subs_on":this.log.info(`[${t}] This room is now in subscribers-only mode.`),this.emits(["subscriber","subscribers","_promiseSubscribers"],[a,a,o]);break;case"subs_off":this.log.info(`[${t}] This room is no longer in subscribers-only mode.`),this.emits(["subscriber","subscribers","_promiseSubscribersoff"],[c,c,o]);break;case"emote_only_on":this.log.info(`[${t}] This room is now in emote-only mode.`),this.emits(["emoteonly","_promiseEmoteonly"],[a,o]);break;case"emote_only_off":this.log.info(`[${t}] This room is no longer in emote-only mode.`),this.emits(["emoteonly","_promiseEmoteonlyoff"],[c,o]);break;case"slow_on":case"slow_off":break;case"followers_on_zero":case"followers_on":case"followers_off":break;case"r9k_on":this.log.info(`[${t}] This room is now in r9k mode.`),this.emits(["r9kmode","r9kbeta","_promiseR9kbeta"],[a,a,o]);break;case"r9k_off":this.log.info(`[${t}] This room is no longer in r9k mode.`),this.emits(["r9kmode","r9kbeta","_promiseR9kbetaoff"],[c,c,o]);break;case"room_mods":{const e=s.split(": "),n=(e.length>1?e[1]:"").toLowerCase().split(", ").filter((e=>e));this.emits(["_promiseMods","mods"],[[null,n],[t,n]]);break}case"no_mods":this.emits(["_promiseMods","mods"],[[null,[]],[t,[]]]);break;case"vips_success":{s.endsWith(".")&&(s=s.slice(0,-1));const e=s.split(": "),n=(e.length>1?e[1]:"").toLowerCase().split(", ").filter((e=>e));this.emits(["_promiseVips","vips"],[[null,n],[t,n]]);break}case"no_vips":this.emits(["_promiseVips","vips"],[[null,[]],[t,[]]]);break;case"already_banned":case"bad_ban_admin":case"bad_ban_anon":case"bad_ban_broadcaster":case"bad_ban_global_mod":case"bad_ban_mod":case"bad_ban_self":case"bad_ban_staff":case"usage_ban":this.log.info(h),this.emits(["notice","_promiseBan"],u);break;case"ban_success":this.log.info(h),this.emits(["notice","_promiseBan"],l);break;case"usage_clear":this.log.info(h),this.emits(["notice","_promiseClear"],u);break;case"usage_mods":this.log.info(h),this.emits(["notice","_promiseMods"],[i,[n,[]]]);break;case"mod_success":this.log.info(h),this.emits(["notice","_promiseMod"],l);break;case"usage_vips":this.log.info(h),this.emits(["notice","_promiseVips"],[i,[n,[]]]);break;case"usage_vip":case"bad_vip_grantee_banned":case"bad_vip_grantee_already_vip":case"bad_vip_max_vips_reached":case"bad_vip_achievement_incomplete":this.log.info(h),this.emits(["notice","_promiseVip"],[i,[n,[]]]);break;case"vip_success":this.log.info(h),this.emits(["notice","_promiseVip"],l);break;case"usage_mod":case"bad_mod_banned":case"bad_mod_mod":this.log.info(h),this.emits(["notice","_promiseMod"],u);break;case"unmod_success":this.log.info(h),this.emits(["notice","_promiseUnmod"],l);break;case"unvip_success":this.log.info(h),this.emits(["notice","_promiseUnvip"],l);break;case"usage_unmod":case"bad_unmod_mod":this.log.info(h),this.emits(["notice","_promiseUnmod"],u);break;case"usage_unvip":case"bad_unvip_grantee_not_vip":this.log.info(h),this.emits(["notice","_promiseUnvip"],u);break;case"color_changed":this.log.info(h),this.emits(["notice","_promiseColor"],l);break;case"usage_color":case"turbo_only_color":this.log.info(h),this.emits(["notice","_promiseColor"],u);break;case"commercial_success":this.log.info(h),this.emits(["notice","_promiseCommercial"],l);break;case"usage_commercial":case"bad_commercial_error":this.log.info(h),this.emits(["notice","_promiseCommercial"],u);break;case"hosts_remaining":{this.log.info(h);const e=isNaN(s[0])?0:parseInt(s[0]);this.emits(["notice","_promiseHost"],[i,[null,~~e]]);break}case"bad_host_hosting":case"bad_host_rate_exceeded":case"bad_host_error":case"usage_host":this.log.info(h),this.emits(["notice","_promiseHost"],[i,[n,null]]);break;case"already_r9k_on":case"usage_r9k_on":this.log.info(h),this.emits(["notice","_promiseR9kbeta"],u);break;case"already_r9k_off":case"usage_r9k_off":this.log.info(h),this.emits(["notice","_promiseR9kbetaoff"],u);break;case"timeout_success":this.log.info(h),this.emits(["notice","_promiseTimeout"],l);break;case"delete_message_success":this.log.info(`[${t} ${s}]`),this.emits(["notice","_promiseDeletemessage"],l);break;case"already_subs_off":case"usage_subs_off":this.log.info(h),this.emits(["notice","_promiseSubscribersoff"],u);break;case"already_subs_on":case"usage_subs_on":this.log.info(h),this.emits(["notice","_promiseSubscribers"],u);break;case"already_emote_only_off":case"usage_emote_only_off":this.log.info(h),this.emits(["notice","_promiseEmoteonlyoff"],u);break;case"already_emote_only_on":case"usage_emote_only_on":this.log.info(h),this.emits(["notice","_promiseEmoteonly"],u);break;case"usage_slow_on":this.log.info(h),this.emits(["notice","_promiseSlow"],u);break;case"usage_slow_off":this.log.info(h),this.emits(["notice","_promiseSlowoff"],u);break;case"usage_timeout":case"bad_timeout_admin":case"bad_timeout_anon":case"bad_timeout_broadcaster":case"bad_timeout_duration":case"bad_timeout_global_mod":case"bad_timeout_mod":case"bad_timeout_self":case"bad_timeout_staff":this.log.info(h),this.emits(["notice","_promiseTimeout"],u);break;case"untimeout_success":case"unban_success":this.log.info(h),this.emits(["notice","_promiseUnban"],l);break;case"usage_unban":case"bad_unban_no_ban":this.log.info(h),this.emits(["notice","_promiseUnban"],u);break;case"usage_delete":case"bad_delete_message_error":case"bad_delete_message_broadcaster":case"bad_delete_message_mod":this.log.info(h),this.emits(["notice","_promiseDeletemessage"],u);break;case"usage_unhost":case"not_hosting":this.log.info(h),this.emits(["notice","_promiseUnhost"],u);break;case"whisper_invalid_login":case"whisper_invalid_self":case"whisper_limit_per_min":case"whisper_limit_per_sec":case"whisper_restricted":case"whisper_restricted_recipient":this.log.info(h),this.emits(["notice","_promiseWhisper"],u);break;case"no_permission":case"msg_banned":case"msg_room_not_found":case"msg_channel_suspended":case"tos_ban":case"invalid_user":this.log.info(h),this.emits(["notice","_promiseBan","_promiseClear","_promiseUnban","_promiseTimeout","_promiseDeletemessage","_promiseMods","_promiseMod","_promiseUnmod","_promiseVips","_promiseVip","_promiseUnvip","_promiseCommercial","_promiseHost","_promiseUnhost","_promiseJoin","_promisePart","_promiseR9kbeta","_promiseR9kbetaoff","_promiseSlow","_promiseSlowoff","_promiseFollowers","_promiseFollowersoff","_promiseSubscribers","_promiseSubscribersoff","_promiseEmoteonly","_promiseEmoteonlyoff","_promiseWhisper"],[i,[n,t]]);break;case"msg_rejected":case"msg_rejected_mandatory":this.log.info(h),this.emit("automod",t,n,s);break;case"unrecognized_cmd":this.log.info(h),this.emit("notice",t,n,s);break;case"cmds_available":case"host_target_went_offline":case"msg_censored_broadcaster":case"msg_duplicate":case"msg_emoteonly":case"msg_verified_email":case"msg_ratelimit":case"msg_subsonly":case"msg_timedout":case"msg_bad_characters":case"msg_channel_blocked":case"msg_facebook":case"msg_followersonly":case"msg_followersonly_followed":case"msg_followersonly_zero":case"msg_slowmode":case"msg_suspended":case"no_help":case"usage_disconnect":case"usage_help":case"usage_me":case"unavailable_command":this.log.info(h),this.emit("notice",t,n,s);break;case"host_on":case"host_off":break;default:s.includes("Login unsuccessful")||s.includes("Login authentication failed")||s.includes("Error logging in")||s.includes("Improperly formatted auth")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason=s,this.log.error(this.reason),this.ws.close()):s.includes("Invalid NICK")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason="Invalid NICK.",this.log.error(this.reason),this.ws.close()):(this.log.warn(`Could not parse NOTICE from tmi.twitch.tv:\n${JSON.stringify(e,null,4)}`),this.emit("notice",t,n,s));break}break}case"USERNOTICE":{const e=o["display-name"]||o["login"],i=o["msg-param-sub-plan"]||"",r=m.unescapeIRC(m.get(o["msg-param-sub-plan-name"],""))||null,a=i.includes("Prime"),c={prime:a,plan:i,planName:r},l=~~(o["msg-param-streak-months"]||0),u=o["msg-param-recipient-display-name"]||o["msg-param-recipient-user-name"],h=~~o["msg-param-mass-gift-count"];switch(o["message-type"]=n,n){case"resub":this.emits(["resub","subanniversary"],[[t,e,l,s,o,c]]);break;case"sub":this.emits(["subscription","sub"],[[t,e,c,s,o]]);break;case"subgift":this.emit("subgift",t,e,l,u,c,o);break;case"anonsubgift":this.emit("anonsubgift",t,l,u,c,o);break;case"submysterygift":this.emit("submysterygift",t,e,h,c,o);break;case"anonsubmysterygift":this.emit("anonsubmysterygift",t,h,c,o);break;case"primepaidupgrade":this.emit("primepaidupgrade",t,e,c,o);break;case"giftpaidupgrade":{const s=o["msg-param-sender-name"]||o["msg-param-sender-login"];this.emit("giftpaidupgrade",t,e,s,o);break}case"anongiftpaidupgrade":this.emit("anongiftpaidupgrade",t,e,o);break;case"raid":{const e=o["msg-param-displayName"]||o["msg-param-login"],s=+o["msg-param-viewerCount"];this.emit("raided",t,e,s,o);break}case"ritual":{const n=o["msg-param-ritual-name"];switch(n){case"new_chatter":this.emit("newchatter",t,e,o,s);break;default:this.emit("ritual",n,t,e,o,s);break}break}default:this.emit("usernotice",n,t,o,s);break}break}case"HOSTTARGET":{const e=s.split(" "),n=~~e[1]||0;"-"===e[0]?(this.log.info(`[${t}] Exited host mode.`),this.emits(["unhost","_promiseUnhost"],[[t,n],[null]])):(this.log.info(`[${t}] Now hosting ${e[0]} for ${n} viewer(s).`),this.emit("hosting",t,e[0],n));break}case"CLEARCHAT":if(e.params.length>1){const n=m.get(e.tags["ban-duration"],null);null===n?(this.log.info(`[${t}] ${s} has been banned.`),this.emit("ban",t,s,null,e.tags)):(this.log.info(`[${t}] ${s} has been timed out for ${n} seconds.`),this.emit("timeout",t,s,null,~~n,e.tags))}else this.log.info(`[${t}] Chat was cleared by a moderator.`),this.emits(["clearchat","_promiseClear"],[[t],[null]]);break;case"CLEARMSG":if(e.params.length>1){const e=s,n=o["login"];o["message-type"]="messagedeleted",this.log.info(`[${t}] ${n}'s message has been deleted.`),this.emit("messagedeleted",t,n,e,o)}break;case"RECONNECT":this.log.info("Received RECONNECT request from Twitch.."),this.log.info(`Disconnecting and reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.disconnect().catch((e=>this.log.error(e))),setTimeout((()=>this.connect().catch((e=>this.log.error(e)))),this.reconnectTimer);break;case"USERSTATE":e.tags.username=this.username,"mod"===e.tags["user-type"]&&(this.moderators[t]||(this.moderators[t]=[]),this.moderators[t].includes(this.username)||this.moderators[t].push(this.username)),m.isJustinfan(this.getUsername())||this.userstate[t]||(this.userstate[t]=o,this.lastJoined=t,this.channels.push(t),this.log.info(`Joined ${t}`),this.emit("join",t,m.username(this.getUsername()),!0)),e.tags["emote-sets"]!==this.emotes&&this._updateEmoteset(e.tags["emote-sets"]),this.userstate[t]=o;break;case"GLOBALUSERSTATE":this.globaluserstate=o,this.emit("globaluserstate",o),"undefined"!==typeof e.tags["emote-sets"]&&this._updateEmoteset(e.tags["emote-sets"]);break;case"ROOMSTATE":if(m.channel(this.lastJoined)===t&&this.emit("_promiseJoin",null,t),e.tags.channel=t,this.emit("roomstate",t,e.tags),!m.hasOwn(e.tags,"subs-only")){if(m.hasOwn(e.tags,"slow"))if("boolean"!==typeof e.tags.slow||e.tags.slow){const s=~~e.tags.slow,n=[t,!0,s];this.log.info(`[${t}] This room is now in slow mode.`),this.emits(["slow","slowmode","_promiseSlow"],[n,n,[null]])}else{const e=[t,!1,0];this.log.info(`[${t}] This room is no longer in slow mode.`),this.emits(["slow","slowmode","_promiseSlowoff"],[e,e,[null]])}if(m.hasOwn(e.tags,"followers-only"))if("-1"===e.tags["followers-only"]){const e=[t,!1,0];this.log.info(`[${t}] This room is no longer in followers-only mode.`),this.emits(["followersonly","followersmode","_promiseFollowersoff"],[e,e,[null]])}else{const s=~~e.tags["followers-only"],n=[t,!0,s];this.log.info(`[${t}] This room is now in follower-only mode.`),this.emits(["followersonly","followersmode","_promiseFollowers"],[n,n,[null]])}}break;case"SERVERCHANGE":break;default:this.log.warn(`Could not parse message from tmi.twitch.tv:\n${JSON.stringify(e,null,4)}`);break}else if("jtv"===e.prefix)switch(e.command){case"MODE":"+o"===s?(this.moderators[t]||(this.moderators[t]=[]),this.moderators[t].includes(e.params[2])||this.moderators[t].push(e.params[2]),this.emit("mod",t,e.params[2])):"-o"===s&&(this.moderators[t]||(this.moderators[t]=[]),this.moderators[t].filter((t=>t!==e.params[2])),this.emit("unmod",t,e.params[2]));break;default:this.log.warn(`Could not parse message from jtv:\n${JSON.stringify(e,null,4)}`);break}else switch(e.command){case"353":this.emit("names",e.params[2],e.params[3].split(" "));break;case"366":break;case"JOIN":{const s=e.prefix.split("!")[0];m.isJustinfan(this.getUsername())&&this.username===s&&(this.lastJoined=t,this.channels.push(t),this.log.info(`Joined ${t}`),this.emit("join",t,s,!0)),this.username!==s&&this.emit("join",t,s,!1);break}case"PART":{let s=!1;const n=e.prefix.split("!")[0];if(this.username===n){s=!0,this.userstate[t]&&delete this.userstate[t];let e=this.channels.indexOf(t);-1!==e&&this.channels.splice(e,1),e=this.opts.channels.indexOf(t),-1!==e&&this.opts.channels.splice(e,1),this.log.info(`Left ${t}`),this.emit("_promisePart",null)}this.emit("part",t,n,s);break}case"WHISPER":{const t=e.prefix.split("!")[0];this.log.info(`[WHISPER] <${t}>: ${s}`),m.hasOwn(e.tags,"username")||(e.tags.username=t),e.tags["message-type"]="whisper";const n=m.channel(e.tags.username);this.emits(["whisper","message"],[[n,e.tags,s,!1]]);break}case"PRIVMSG":if(e.tags.username=e.prefix.split("!")[0],"jtv"===e.tags.username){const e=m.username(s.split(" ")[0]),n=s.includes("auto");if(s.includes("hosting you for")){const o=m.extractNumber(s);this.emit("hosted",t,e,o,n)}else s.includes("hosting you")&&this.emit("hosted",t,e,0,n)}else{const n=m.get(this.opts.options.messagesLogLevel,"info"),o=m.actionMessage(s);if(e.tags["message-type"]=o?"action":"chat",s=o?o[1]:s,m.hasOwn(e.tags,"bits"))this.emit("cheer",t,e.tags,s);else{if(m.hasOwn(e.tags,"msg-id")){if("highlighted-message"===e.tags["msg-id"]){const n=e.tags["msg-id"];this.emit("redeem",t,e.tags.username,n,e.tags,s)}else if("skip-subs-mode-message"===e.tags["msg-id"]){const n=e.tags["msg-id"];this.emit("redeem",t,e.tags.username,n,e.tags,s)}}else if(m.hasOwn(e.tags,"custom-reward-id")){const n=e.tags["custom-reward-id"];this.emit("redeem",t,e.tags.username,n,e.tags,s)}o?(this.log[n](`[${t}] *<${e.tags.username}>: ${s}`),this.emits(["action","message"],[[t,e.tags,s,!1]])):(this.log[n](`[${t}] <${e.tags.username}>: ${s}`),this.emits(["chat","message"],[[t,e.tags,s,!1]]))}}break;default:this.log.warn(`Could not parse message:\n${JSON.stringify(e,null,4)}`);break}},f.prototype.connect=function(){return new Promise(((e,t)=>{this.server=m.get(this.opts.connection.server,"irc-ws.chat.twitch.tv"),this.port=m.get(this.opts.connection.port,80),this.secure&&(this.port=443),443===this.port&&(this.secure=!0),this.reconnectTimer=this.reconnectTimer*this.reconnectDecay,this.reconnectTimer>=this.maxReconnectInterval&&(this.reconnectTimer=this.maxReconnectInterval),this._openConnection(),this.once("_promiseConnect",(s=>{s?t(s):e([this.server,~~this.port])}))}))},f.prototype._openConnection=function(){const e=`${this.secure?"wss":"ws"}://${this.server}:${this.port}/`,t={};"agent"in this.opts.connection&&(t.agent=this.opts.connection.agent),this.ws=new o(e,"irc",t),this.ws.onmessage=this._onMessage.bind(this),this.ws.onerror=this._onError.bind(this),this.ws.onclose=this._onClose.bind(this),this.ws.onopen=this._onOpen.bind(this)},f.prototype._onOpen=function(){this._isConnected()&&(this.log.info(`Connecting to ${this.server} on port ${this.port}..`),this.emit("connecting",this.server,~~this.port),this.username=m.get(this.opts.identity.username,m.justinfan()),this._getToken().then((e=>{const t=m.password(e);this.log.info("Sending authentication to server.."),this.emit("logon");let s="twitch.tv/tags twitch.tv/commands";this._skipMembership||(s+=" twitch.tv/membership"),this.ws.send("CAP REQ :"+s),t?this.ws.send(`PASS ${t}`):m.isJustinfan(this.username)&&this.ws.send("PASS SCHMOOPIIE"),this.ws.send(`NICK ${this.username}`)})).catch((e=>{this.emits(["_promiseConnect","disconnected"],[[e],["Could not get a token."]])})))},f.prototype._getToken=function(){const e=this.opts.identity.password;let t;return"function"===typeof e?(t=e(),t instanceof Promise?t:Promise.resolve(t)):Promise.resolve(e)},f.prototype._onMessage=function(e){const t=e.data.trim().split("\r\n");t.forEach((e=>{const t=u.msg(e);t&&this.handleMessage(t)}))},f.prototype._onError=function(){this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer),this.reason=null===this.ws?"Connection closed.":"Unable to connect.",this.emits(["_promiseConnect","disconnected"],[[this.reason]]),this.reconnect&&this.reconnections===this.maxReconnectAttempts&&(this.emit("maxreconnect"),this.log.error("Maximum reconnection attempts reached.")),this.reconnect&&!this.reconnecting&&this.reconnections<=this.maxReconnectAttempts-1&&(this.reconnecting=!0,this.reconnections=this.reconnections+1,this.log.error(`Reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.emit("reconnect"),setTimeout((()=>{this.reconnecting=!1,this.connect().catch((e=>this.log.error(e)))}),this.reconnectTimer)),this.ws=null},f.prototype._onClose=function(){this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer),this.wasCloseCalled?(this.wasCloseCalled=!1,this.reason="Connection closed.",this.log.info(this.reason),this.emits(["_promiseConnect","_promiseDisconnect","disconnected"],[[this.reason],[null],[this.reason]])):(this.emits(["_promiseConnect","disconnected"],[[this.reason]]),this.reconnect&&this.reconnections===this.maxReconnectAttempts&&(this.emit("maxreconnect"),this.log.error("Maximum reconnection attempts reached.")),this.reconnect&&!this.reconnecting&&this.reconnections<=this.maxReconnectAttempts-1&&(this.reconnecting=!0,this.reconnections=this.reconnections+1,this.log.error(`Could not connect to server. Reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.emit("reconnect"),setTimeout((()=>{this.reconnecting=!1,this.connect().catch((e=>this.log.error(e)))}),this.reconnectTimer))),this.ws=null},f.prototype._getPromiseDelay=function(){return this.currentLatency<=600?600:this.currentLatency+100},f.prototype._sendCommand=function(e,t,s,n){return new Promise(((o,i)=>{if(!this._isConnected())return i("Not connected to server.");if(null!==e&&"number"!==typeof e||(null===e&&(e=this._getPromiseDelay()),m.promiseDelay(e).then((()=>i("No response from Twitch.")))),null!==t){const e=m.channel(t);this.log.info(`[${e}] Executing command: ${s}`),this.ws.send(`PRIVMSG ${e} :${s}`)}else this.log.info(`Executing command: ${s}`),this.ws.send(s);"function"===typeof n?n(o,i):o()}))},f.prototype._sendMessage=function(e,t,s,n){return new Promise(((o,i)=>{if(!this._isConnected())return i("Not connected to server.");if(m.isJustinfan(this.getUsername()))return i("Cannot send anonymous messages.");const r=m.channel(t);if(this.userstate[r]||(this.userstate[r]={}),s.length>=500){const n=m.splitLine(s,500);s=n[0],setTimeout((()=>{this._sendMessage(e,t,n[1],(()=>{}))}),350)}this.ws.send(`PRIVMSG ${r} :${s}`);const a={};Object.keys(this.emotesets).forEach((e=>this.emotesets[e].forEach((e=>{const t=m.isRegex(e.code)?u.emoteRegex:u.emoteString;return t(s,e.code,e.id,a)}))));const c=Object.assign(this.userstate[r],u.emotes({emotes:u.transformEmotes(a)||null})),l=m.get(this.opts.options.messagesLogLevel,"info"),h=m.actionMessage(s);h?(c["message-type"]="action",this.log[l](`[${r}] *<${this.getUsername()}>: ${h[1]}`),this.emits(["action","message"],[[r,c,h[1],!0]])):(c["message-type"]="chat",this.log[l](`[${r}] <${this.getUsername()}>: ${s}`),this.emits(["chat","message"],[[r,c,s,!0]])),"function"===typeof n?n(o,i):o()}))},f.prototype._updateEmoteset=function(e){let t=void 0!==e;if(t&&(e===this.emotes?t=!1:this.emotes=e),this._skipUpdatingEmotesets)return void(t&&this.emit("emotesets",e,{}));const s=()=>{this._updateEmotesetsTimerDelay>0&&(clearTimeout(this._updateEmotesetsTimer),this._updateEmotesetsTimer=setTimeout((()=>this._updateEmoteset(e)),this._updateEmotesetsTimerDelay))};this._getToken().then((t=>{const s=`https://api.twitch.tv/kraken/chat/emoticon_images?emotesets=${e}`,n={};return"fetchAgent"in this.opts.connection&&(n.agent=this.opts.connection.fetchAgent),i(s,{...n,headers:{Accept:"application/vnd.twitchtv.v5+json",Authorization:`OAuth ${m.token(t)}`,"Client-ID":this.clientId}})})).then((e=>e.json())).then((t=>{this.emotesets=t.emoticon_sets||{},this.emit("emotesets",e,this.emotesets),s()})).catch((()=>s()))},f.prototype.getUsername=function(){return this.username},f.prototype.getOptions=function(){return this.opts},f.prototype.getChannels=function(){return this.channels},f.prototype.isMod=function(e,t){const s=m.channel(e);return this.moderators[s]||(this.moderators[s]=[]),this.moderators[s].includes(m.username(t))},f.prototype.readyState=function(){return null===this.ws?"CLOSED":["CONNECTING","OPEN","CLOSING","CLOSED"][this.ws.readyState]},f.prototype._isConnected=function(){return null!==this.ws&&1===this.ws.readyState},f.prototype.disconnect=function(){return new Promise(((e,t)=>{null!==this.ws&&3!==this.ws.readyState?(this.wasCloseCalled=!0,this.log.info("Disconnecting from server.."),this.ws.close(),this.once("_promiseDisconnect",(()=>e([this.server,~~this.port])))):(this.log.error("Cannot disconnect from server. Socket is not opened or connection is already closing."),t("Cannot disconnect from server. Socket is not opened or connection is already closing."))}))},f.prototype.off=f.prototype.removeListener,e.exports&&(e.exports=f),"undefined"!==typeof window&&(window.tmi={client:f,Client:f})},5950:function(e,t,s){s(7658);const n=s(5579);function o(e,t){return e=n.channel(e),t=n.get(t,30),this._sendCommand(null,e,`/followers ${t}`,((s,n)=>{this.once("_promiseFollowers",(o=>{o?n(o):s([e,~~t])}))}))}function i(e){return e=n.channel(e),this._sendCommand(null,e,"/followersoff",((t,s)=>{this.once("_promiseFollowersoff",(n=>{n?s(n):t([e])}))}))}function r(e){return e=n.channel(e),this._sendCommand(null,null,`PART ${e}`,((t,s)=>{this.once("_promisePart",(n=>{n?s(n):t([e])}))}))}function a(e){return e=n.channel(e),this._sendCommand(null,e,"/r9kbeta",((t,s)=>{this.once("_promiseR9kbeta",(n=>{n?s(n):t([e])}))}))}function c(e){return e=n.channel(e),this._sendCommand(null,e,"/r9kbetaoff",((t,s)=>{this.once("_promiseR9kbetaoff",(n=>{n?s(n):t([e])}))}))}function l(e,t){return e=n.channel(e),t=n.get(t,300),this._sendCommand(null,e,`/slow ${t}`,((s,n)=>{this.once("_promiseSlow",(o=>{o?n(o):s([e,~~t])}))}))}function u(e){return e=n.channel(e),this._sendCommand(null,e,"/slowoff",((t,s)=>{this.once("_promiseSlowoff",(n=>{n?s(n):t([e])}))}))}e.exports={action(e,t){return e=n.channel(e),t=`ACTION ${t}`,this._sendMessage(this._getPromiseDelay(),e,t,((s,n)=>{s([e,t])}))},ban(e,t,s){return e=n.channel(e),t=n.username(t),s=n.get(s,""),this._sendCommand(null,e,`/ban ${t} ${s}`,((n,o)=>{this.once("_promiseBan",(i=>{i?o(i):n([e,t,s])}))}))},clear(e){return e=n.channel(e),this._sendCommand(null,e,"/clear",((t,s)=>{this.once("_promiseClear",(n=>{n?s(n):t([e])}))}))},color(e,t){return t=n.get(t,e),this._sendCommand(null,"#tmijs",`/color ${t}`,((e,s)=>{this.once("_promiseColor",(n=>{n?s(n):e([t])}))}))},commercial(e,t){return e=n.channel(e),t=n.get(t,30),this._sendCommand(null,e,`/commercial ${t}`,((s,n)=>{this.once("_promiseCommercial",(o=>{o?n(o):s([e,~~t])}))}))},deletemessage(e,t){return e=n.channel(e),this._sendCommand(null,e,`/delete ${t}`,((t,s)=>{this.once("_promiseDeletemessage",(n=>{n?s(n):t([e])}))}))},emoteonly(e){return e=n.channel(e),this._sendCommand(null,e,"/emoteonly",((t,s)=>{this.once("_promiseEmoteonly",(n=>{n?s(n):t([e])}))}))},emoteonlyoff(e){return e=n.channel(e),this._sendCommand(null,e,"/emoteonlyoff",((t,s)=>{this.once("_promiseEmoteonlyoff",(n=>{n?s(n):t([e])}))}))},followersonly:o,followersmode:o,followersonlyoff:i,followersmodeoff:i,host(e,t){return e=n.channel(e),t=n.username(t),this._sendCommand(2e3,e,`/host ${t}`,((s,n)=>{this.once("_promiseHost",((o,i)=>{o?n(o):s([e,t,~~i])}))}))},join(e){return e=n.channel(e),this._sendCommand(void 0,null,`JOIN ${e}`,((t,s)=>{const o="_promiseJoin";let i=!1;const r=(a,c)=>{e===n.channel(c)&&(this.removeListener(o,r),i=!0,a?s(a):t([e]))};this.on(o,r);const a=this._getPromiseDelay();n.promiseDelay(a).then((()=>{i||this.emit(o,"No response from Twitch.",e)}))}))},mod(e,t){return e=n.channel(e),t=n.username(t),this._sendCommand(null,e,`/mod ${t}`,((s,n)=>{this.once("_promiseMod",(o=>{o?n(o):s([e,t])}))}))},mods(e){return e=n.channel(e),this._sendCommand(null,e,"/mods",((t,s)=>{this.once("_promiseMods",((n,o)=>{n?s(n):(o.forEach((t=>{this.moderators[e]||(this.moderators[e]=[]),this.moderators[e].includes(t)||this.moderators[e].push(t)})),t(o))}))}))},part:r,leave:r,ping(){return this._sendCommand(null,null,"PING",((e,t)=>{this.latency=new Date,this.pingTimeout=setTimeout((()=>{null!==this.ws&&(this.wasCloseCalled=!1,this.log.error("Ping timeout."),this.ws.close(),clearInterval(this.pingLoop),clearTimeout(this.pingTimeout))}),n.get(this.opts.connection.timeout,9999)),this.once("_promisePing",(t=>e([parseFloat(t)])))}))},r9kbeta:a,r9kmode:a,r9kbetaoff:c,r9kmodeoff:c,raw(e){return this._sendCommand(null,null,e,((t,s)=>{t([e])}))},say(e,t){return e=n.channel(e),t.startsWith(".")&&!t.startsWith("..")||t.startsWith("/")||t.startsWith("\\")?"me "===t.substr(1,3)?this.action(e,t.substr(4)):this._sendCommand(null,e,t,((s,n)=>{s([e,t])})):this._sendMessage(this._getPromiseDelay(),e,t,((s,n)=>{s([e,t])}))},slow:l,slowmode:l,slowoff:u,slowmodeoff:u,subscribers(e){return e=n.channel(e),this._sendCommand(null,e,"/subscribers",((t,s)=>{this.once("_promiseSubscribers",(n=>{n?s(n):t([e])}))}))},subscribersoff(e){return e=n.channel(e),this._sendCommand(null,e,"/subscribersoff",((t,s)=>{this.once("_promiseSubscribersoff",(n=>{n?s(n):t([e])}))}))},timeout(e,t,s,o){return e=n.channel(e),t=n.username(t),null===s||n.isInteger(s)||(o=s,s=300),s=n.get(s,300),o=n.get(o,""),this._sendCommand(null,e,`/timeout ${t} ${s} ${o}`,((n,i)=>{this.once("_promiseTimeout",(r=>{r?i(r):n([e,t,~~s,o])}))}))},unban(e,t){return e=n.channel(e),t=n.username(t),this._sendCommand(null,e,`/unban ${t}`,((s,n)=>{this.once("_promiseUnban",(o=>{o?n(o):s([e,t])}))}))},unhost(e){return e=n.channel(e),this._sendCommand(2e3,e,"/unhost",((t,s)=>{this.once("_promiseUnhost",(n=>{n?s(n):t([e])}))}))},unmod(e,t){return e=n.channel(e),t=n.username(t),this._sendCommand(null,e,`/unmod ${t}`,((s,n)=>{this.once("_promiseUnmod",(o=>{o?n(o):s([e,t])}))}))},unvip(e,t){return e=n.channel(e),t=n.username(t),this._sendCommand(null,e,`/unvip ${t}`,((s,n)=>{this.once("_promiseUnvip",(o=>{o?n(o):s([e,t])}))}))},vip(e,t){return e=n.channel(e),t=n.username(t),this._sendCommand(null,e,`/vip ${t}`,((s,n)=>{this.once("_promiseVip",(o=>{o?n(o):s([e,t])}))}))},vips(e){return e=n.channel(e),this._sendCommand(null,e,"/vips",((e,t)=>{this.once("_promiseVips",((s,n)=>{s?t(s):e(n)}))}))},whisper(e,t){return e=n.username(e),e===this.getUsername()?Promise.reject("Cannot send a whisper to the same account."):this._sendCommand(null,"#tmijs",`/w ${e} ${t}`,((e,t)=>{this.once("_promiseWhisper",(e=>{e&&t(e)}))})).catch((s=>{if(s&&"string"===typeof s&&0!==s.indexOf("No response from Twitch."))throw s;const o=n.channel(e),i=Object.assign({"message-type":"whisper","message-id":null,"thread-id":null,username:this.getUsername()},this.globaluserstate);return this.emits(["whisper","message"],[[o,i,t,!0],[o,i,t,!0]]),[e,t]}))}}},7136:function(e,t,s){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return"function"===typeof e}function i(e){return"number"===typeof e}function r(e){return"object"===typeof e&&null!==e}function a(e){return void 0===e}s(1703),s(7658),e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,s,n,i,c,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(s=this._events[e],a(s))return!1;if(o(s))switch(arguments.length){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),s.apply(this,i)}else if(r(s))for(i=Array.prototype.slice.call(arguments,1),l=s.slice(),n=l.length,c=0;c<n;c++)l[c].apply(this,i);return!0},n.prototype.addListener=function(e,t){var s;if(!o(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned&&(s=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,s&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"===typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!o(t))throw TypeError("listener must be a function");var s=!1;if(this._events.hasOwnProperty(e)&&"_"===e.charAt(0)){var n=1,i=e;for(var r in this._events)this._events.hasOwnProperty(r)&&r.startsWith(i)&&n++;e+=n}function a(){"_"!==e.charAt(0)||isNaN(e.substr(e.length-1))||(e=e.substring(0,e.length-1)),this.removeListener(e,a),s||(s=!0,t.apply(this,arguments))}return a.listener=t,this.on(e,a),this},n.prototype.removeListener=function(e,t){var s,n,i,a;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=this._events[e],i=s.length,n=-1,s===t||o(s.listener)&&s.listener===t){if(delete this._events[e],this._events.hasOwnProperty(e+"2")&&"_"===e.charAt(0)){var c=e;for(var l in this._events)this._events.hasOwnProperty(l)&&l.startsWith(c)&&(isNaN(parseInt(l.substr(l.length-1)))||(this._events[e+parseInt(l.substr(l.length-1)-1)]=this._events[l],delete this._events[l]));this._events[e]=this._events[e+"1"],delete this._events[e+"1"]}this._events.removeListener&&this.emit("removeListener",e,t)}else if(r(s)){for(a=i;a-- >0;)if(s[a]===t||s[a].listener&&s[a].listener===t){n=a;break}if(n<0)return this;1===s.length?(s.length=0,delete this._events[e]):s.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,s;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(s=this._events[e],o(s))this.removeListener(e,s);else if(s)while(s.length)this.removeListener(e,s[s.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[],t},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(o(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},9651:function(e,t,s){const n=s(5579);let o="info";const i={trace:0,debug:1,info:2,warn:3,error:4,fatal:5};function r(e){return function(t){i[e]>=i[o]&&console.log(`[${n.formatDate(new Date)}] ${e}: ${t}`)}}e.exports={setLevel(e){o=e},trace:r("trace"),debug:r("debug"),info:r("info"),warn:r("warn"),error:r("error"),fatal:r("fatal")}},3011:function(e,t,s){s(7658);const n=s(5579),o=/\S+/g;function i(e,t,s=",",n="/",o){const i=e[t];if(void 0===i)return e;const r="string"===typeof i;if(e[t+"-raw"]=r?i:null,!0===i)return e[t]=null,e;if(e[t]={},r){const r=i.split(s);for(let s=0;s<r.length;s++){const i=r[s].split(n);let a=i[1];void 0!==o&&a&&(a=a.split(o)),e[t][i[0]]=a||null}}return e}e.exports={badges:e=>i(e,"badges"),badgeInfo:e=>i(e,"badge-info"),emotes:e=>i(e,"emotes","/",":",","),emoteRegex(e,t,s,i){o.lastIndex=0;const r=new RegExp("(\\b|^|\\s)"+n.unescapeHtml(t)+"(\\b|$|\\s)");let a;while(null!==(a=o.exec(e)))r.test(a[0])&&(i[s]=i[s]||[],i[s].push([a.index,o.lastIndex-1]))},emoteString(e,t,s,i){let r;o.lastIndex=0;while(null!==(r=o.exec(e)))r[0]===n.unescapeHtml(t)&&(i[s]=i[s]||[],i[s].push([r.index,o.lastIndex-1]))},transformEmotes(e){let t="";return Object.keys(e).forEach((s=>{t=`${t+s}:`,e[s].forEach((e=>t=`${t+e.join("-")},`)),t=`${t.slice(0,-1)}/`})),t.slice(0,-1)},formTags(e){const t=[];for(const s in e){const o=n.escapeIRC(e[s]);t.push(`${s}=${o}`)}return`@${t.join(";")}`},msg(e){const t={raw:e,tags:{},prefix:null,command:null,params:[]};let s=0,n=0;if(64===e.charCodeAt(0)){if(n=e.indexOf(" "),-1===n)return null;const o=e.slice(1,n).split(";");for(let e=0;e<o.length;e++){const s=o[e],n=s.split("=");t.tags[n[0]]=s.substring(s.indexOf("=")+1)||!0}s=n+1}while(32===e.charCodeAt(s))s++;if(58===e.charCodeAt(s)){if(n=e.indexOf(" ",s),-1===n)return null;t.prefix=e.slice(s+1,n),s=n+1;while(32===e.charCodeAt(s))s++}if(n=e.indexOf(" ",s),-1===n)return e.length>s?(t.command=e.slice(s),t):null;t.command=e.slice(s,n),s=n+1;while(32===e.charCodeAt(s))s++;while(s<e.length){if(n=e.indexOf(" ",s),58===e.charCodeAt(s)){t.params.push(e.slice(s+1));break}if(-1===n){if(-1===n){t.params.push(e.slice(s));break}}else{t.params.push(e.slice(s,n)),s=n+1;while(32===e.charCodeAt(s))s++}}return t}}},2209:function(e,t,s){s(7658);class n{constructor(e){this.queue=[],this.index=0,this.defaultDelay=void 0===e?3e3:e}add(e,t){this.queue.push({fn:e,delay:t})}next(){const e=this.index++,t=this.queue[e];if(!t)return;const s=this.queue[this.index];if(t.fn(),s){const e=void 0===s.delay?this.defaultDelay:s.delay;setTimeout((()=>this.next()),e)}}}e.exports=n},5579:function(e){const t=/^\u0001ACTION ([^\u0001]+)\u0001$/,s=/^(justinfan)(\d+$)/,n=/\\([sn:r\\])/g,o=/([ \n;\r\\])/g,i={s:" ",n:"",":":";",r:""},r={" ":"s","\n":"n",";":":","\r":"r"},a=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i"),c=/[|\\^$*+?:#]/,l=e.exports={get:(e,t)=>"undefined"===typeof e?t:e,hasOwn:(e,t)=>({}.hasOwnProperty.call(e,t)),promiseDelay:e=>new Promise((t=>setTimeout(t,e))),isFinite:e=>isFinite(e)&&!isNaN(parseFloat(e)),toNumber(e,t){if(null===e)return 0;const s=Math.pow(10,l.isFinite(t)?t:0);return Math.round(e*s)/s},isInteger:e=>!isNaN(l.toNumber(e,0)),isRegex:e=>c.test(e),isURL:e=>a.test(e),justinfan:()=>`justinfan${Math.floor(8e4*Math.random()+1e3)}`,isJustinfan:e=>s.test(e),channel(e){const t=(e||"").toLowerCase();return"#"===t[0]?t:"#"+t},username(e){const t=(e||"").toLowerCase();return"#"===t[0]?t.slice(1):t},token:e=>e?e.toLowerCase().replace("oauth:",""):"",password(e){const t=l.token(e);return t?`oauth:${t}`:""},actionMessage:e=>e.match(t),replaceAll(e,t){if(null===e||"undefined"===typeof e)return null;for(const s in t)e=e.replace(new RegExp(s,"g"),t[s]);return e},unescapeHtml:e=>e.replace(/\\&amp\\;/g,"&").replace(/\\&lt\\;/g,"<").replace(/\\&gt\\;/g,">").replace(/\\&quot\\;/g,'"').replace(/\\&#039\\;/g,"'"),unescapeIRC(e){return e&&"string"===typeof e&&e.includes("\\")?e.replace(n,((e,t)=>t in i?i[t]:t)):e},escapeIRC(e){return e&&"string"===typeof e?e.replace(o,((e,t)=>t in r?`\\${r[t]}`:t)):e},addWord:(e,t)=>e.length?e+" "+t:e+t,splitLine(e,t){let s=e.substring(0,t).lastIndexOf(" ");return-1===s&&(s=t-1),[e.substring(0,s),e.substring(s+1)]},extractNumber(e){const t=e.split(" ");for(let s=0;s<t.length;s++)if(l.isInteger(t[s]))return~~t[s];return 0},formatDate(e){let t=e.getHours(),s=e.getMinutes();return t=(t<10?"0":"")+t,s=(s<10?"0":"")+s,`${t}:${s}`},inherits(e,t){e.super_=t;const s=function(){};s.prototype=t.prototype,e.prototype=new s,e.prototype.constructor=e},isNode(){try{return"object"===typeof process&&"[object process]"===Object.prototype.toString.call(process)}catch(e){}return!1}}},4689:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return R}});var n=s(3396),o=s(7139);const i={class:"tts"},r={class:"padding-md"},a=(0,n.Uk)("Activate"),c={key:1,class:"text-grey-30"},l={key:2},u=(0,n.Uk)(" Requested messages "),h={class:"list"};function m(e,t,s,m,p,f){const d=(0,n.up)("Action"),g=(0,n.up)("Card");return(0,n.wg)(),(0,n.iD)("div",i,[(0,n.Wm)(g,{title:`Connected to ${e.$route.params.channel}`},{default:(0,n.w5)((()=>[(0,n._)("div",r,[p.active?p.queue&&0!==p.queue.length?((0,n.wg)(),(0,n.iD)("div",l,[u,(0,n._)("ul",h,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(p.queue.reverse(),((e,t)=>((0,n.wg)(),(0,n.iD)("li",{key:t},(0,o.zw)(e),1)))),128))])])):((0,n.wg)(),(0,n.iD)("p",c,"The TTS queue is currently empty, awaiting requests")):((0,n.wg)(),(0,n.j4)(d,{key:0,onClick:t[0]||(t[0]=e=>p.active=!0)},{default:(0,n.w5)((()=>[a])),_:1}))])])),_:1},8,["title"])])}s(7658);var p=s(5842),f=s(6752),d=s(8912),g=s.n(d),_={client:null,init(e){const t=new(g().Client)({channels:[e]});t.connect(),this.client=t},onMessage(e){this.client.on("message",e)}},y=s(6265),b=s.n(y),v={audio:null,q:[],playing:!1,async say(e){console.log("tts: "+e),this.q.push(e),console.log("added TTS to q. current queue length: "+this.q.length),this.playing||this.play()},async play(){const e="https://utils.idalon.com/v1/tts";if(this.q&&this.q.length<1||!this.q)return void console.log("queue is empty");this.playing=!0;const t=this.q.shift(),s=await b().post(e,{voice:"Brian",text:t});this.audio=new Audio(s.data.speak_url),this.audio.play().catch((()=>{console.log("click activate first"),this.audio=null})).then((()=>{this.playing=!1,this.play()}))},skip(){this.audio&&(this.audio.pause(),this.play())}},w={name:"Tts",components:{Card:p.Z,Action:f.Z},data(){return{active:!1,queue:[]}},mounted(){_.init(this.$route.params.channel),_.onMessage(((e,t,s)=>{const n=/^!tts .+/.test(s),o=/^!skiptts$/.test(s),i=Object.keys(t.badges).some((e=>["broadcaster","moderator"].includes(e)));if(n){const e=s.replace("!tts ","");return this.queue.push(e),v.say(e)}if(o&&i)return v.skip()}))}},E=s(89);const C=(0,E.Z)(w,[["render",m],["__scopeId","data-v-16b9522c"]]);var R=C},2604:function(){},8726:function(){}}]);
//# sourceMappingURL=tts.b6e25206.js.map